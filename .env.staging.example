# ============================================
# STAGING ENVIRONMENT CONFIGURATION
# ============================================
# Copy this to .env on staging server
# Update all values marked with YOUR_*

# ============================================
# ENVIRONMENT
# ============================================
ENVIRONMENT=staging

# ============================================
# DATABASE (PostgreSQL)
# ============================================
POSTGRES_DB=p1lending_etl_staging
POSTGRES_USER=etl_user
POSTGRES_PASSWORD=YOUR_SECURE_STAGING_PASSWORD_HERE
POSTGRES_HOST=db
POSTGRES_PORT=5432

# ============================================
# SECURITY
# ============================================
# Generate new secret key for staging:
# python3 -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=YOUR_STAGING_SECRET_KEY_HERE
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# CORS
# ============================================
CORS_ORIGINS=["https://staging.etl.p1lending.io"]

# ============================================
# REDIS
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ============================================
# CELERY
# ============================================
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0

# ============================================
# FRONTEND
# ============================================
# Empty for production (uses relative URLs)
VITE_API_URL=

# ============================================
# SNOWFLAKE
# ============================================
# Use same credentials as production
SNOWFLAKE_ACCOUNT=YOUR_ACCOUNT
SNOWFLAKE_USER=YOUR_USER
SNOWFLAKE_WAREHOUSE=YOUR_WAREHOUSE
SNOWFLAKE_DATABASE=YOUR_DATABASE
SNOWFLAKE_SCHEMA=PUBLIC
SNOWFLAKE_ROLE=ORGADMIN
SNOWFLAKE_PRIVATE_KEY_PATH=/app/secrets/rsa_key.p8
SNOWFLAKE_PRIVATE_KEY_PASSWORD=YOUR_SNOWFLAKE_KEY_PASSWORD

# ============================================
# GOOGLE SHEETS (DEPRECATED - Using Snowflake)
# ============================================
# Keep for backwards compatibility if needed
GOOGLE_CREDENTIALS_FILE=/app/secrets/google_credentials.json
GOOGLE_SHEET_ID=YOUR_STAGING_SHEET_ID_IF_NEEDED

# ============================================
# IDICORE API
# ============================================
# Use same credentials as production
IDICORE_BASE_URL=https://api.idicore.com
IDICORE_CLIENT_ID=YOUR_IDICORE_CLIENT_ID
IDICORE_CLIENT_SECRET=YOUR_IDICORE_CLIENT_SECRET
IDICORE_BATCH_SIZE=150
IDICORE_TIMEOUT=30

# ============================================
# CCC/DNC SCRUB API
# ============================================
# Use same credentials as production
CCC_API_KEY=YOUR_CCC_API_KEY
CCC_API_URL=https://dataapi.dncscrub.com/v1.4/scrub/litigator
CCC_BATCH_SIZE=50
CCC_RATE_LIMIT_DELAY=0.5

# ============================================
# DNC DATABASE
# ============================================
DNC_DB_PATH=/app/dnc_database.db

# ============================================
# ETL CONFIGURATION
# ============================================
ETL_MAX_WORKERS=4
ETL_BATCH_SIZE=500
ETL_LOG_LEVEL=INFO

# ============================================
# NTFY PUSH NOTIFICATIONS
# ============================================
# Enable for staging to receive notifications
NTFY_ENABLED=true
NTFY_BASE_URL=http://ntfy:80
NTFY_TOKEN=
NTFY_TIMEOUT=10

# NTFY Topics
NTFY_TOPIC_AUTH=p1-staging-auth
NTFY_TOPIC_JOBS=p1-staging-jobs
NTFY_TOPIC_ERRORS=p1-staging-errors
NTFY_TOPIC_SYSTEM=p1-staging-system

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_FILE=/app/backend/logs/etl.log

# ============================================
# FEATURE FLAGS (Staging)
# ============================================
# Enable new features for testing on staging
ENABLE_RESULTS_SERVICE=true
ENABLE_AUDIT_LOGGING=true
ENABLE_NTFY_NOTIFICATIONS=true
